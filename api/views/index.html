<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home of this </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <nav class="nav">
            <a class="nav-link" aria-current="page" href="/">Acceuil</a>
            <a class="nav-link" href="/users/add">Ajout Utilisateur</a>
            <a class="nav-link" href="#">Link</a>

        </nav>
        <h3>Hello</h3>
        <div class="list-group" id="users-list">

        </div>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        fetch('api/users').then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok')
            }
            return response.json()
        }).then(data => {
            const el = document.getElementById('users-list')

            showUsersList(data, el)

        }).catch(error => {
            console.error('fetch problem', error);
        })

        const showUsersList = (arr, el) => {
            el.innerHtml = '';
            for (const user of arr) {

                const item = document.createElement('p');
                item.className = "list-group-item list-group-item-action";

                const nom = document.createElement('span');
                const email = document.createElement('span');

                nom.innerHTML = user.nom;
                email.innerHTML = user.email;

                // item.onclick = () => {

                //     localStorage.setItem('user', JSON.stringify(user));

                //     location.assign(`/users/update/${user.id}`);
                // };
                item.appendChild(nom);
                item.appendChild(email);
                el.appendChild(item)
            }
        }
    </script>
</body>

</html>